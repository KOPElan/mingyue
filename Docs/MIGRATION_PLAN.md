# MingYue è¿ç§»è®¡åˆ’æ–‡æ¡£
## QingFeng â†’ MingYue åŠŸèƒ½è¿ç§»ä¸é‡æ„è®¡åˆ’

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**åˆ›å»ºæ—¥æœŸ**: 2026-01-21  
**é¡¹ç›®ç›®æ ‡**: å°† KOPElan/qingfeng ä»“åº“çš„æ‰€æœ‰åŠŸèƒ½è¿ç§»åˆ° MingYueï¼Œå¹¶æ ¹æ®æœ€ä½³å®è·µè¿›è¡Œé‡æ„ä¼˜åŒ–

---

## ç›®å½•
1. [é¡¹ç›®æ¦‚è¿°](#1-é¡¹ç›®æ¦‚è¿°)
2. [å½“å‰çŠ¶æ€åˆ†æ](#2-å½“å‰çŠ¶æ€åˆ†æ)
3. [è¿ç§»ç­–ç•¥](#3-è¿ç§»ç­–ç•¥)
4. [è¯¦ç»†è¿ç§»è®¡åˆ’](#4-è¯¦ç»†è¿ç§»è®¡åˆ’)
5. [é‡æ„ä¼˜åŒ–è¦ç‚¹](#5-é‡æ„ä¼˜åŒ–è¦ç‚¹)
6. [æŠ€æœ¯æ ˆå¯¹æ¯”](#6-æŠ€æœ¯æ ˆå¯¹æ¯”)
7. [é£é™©è¯„ä¼°](#7-é£é™©è¯„ä¼°)
8. [æ—¶é—´è§„åˆ’](#8-æ—¶é—´è§„åˆ’)

---

## 1. é¡¹ç›®æ¦‚è¿°

### 1.1 é¡¹ç›®èƒŒæ™¯
MingYueï¼ˆæ˜æœˆï¼‰æ˜¯ä¸€ä¸ªåŸºäº .NET 10.0 å’Œ Blazor Server çš„å®¶åº­æœåŠ¡å™¨é—¨æˆ·é¡¹ç›®ï¼Œæ—¨åœ¨æä¾›ç»Ÿä¸€çš„æœåŠ¡å™¨ç®¡ç†ç•Œé¢ã€‚æœ¬é¡¹ç›®è®¡åˆ’è¿ç§»å¹¶å®ç° QingFengï¼ˆæ¸…é£ï¼‰ä»“åº“ä¸­çš„æ‰€æœ‰åŠŸèƒ½ï¼ŒåŒæ—¶è¿›è¡Œä»£ç é‡æ„ä»¥ç¬¦åˆæœ€ä½³å®è·µã€‚

### 1.2 é¡¹ç›®ç›®æ ‡
- âœ… è¿ç§» QingFeng çš„æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½åˆ° MingYue
- âœ… éµå¾ª Fluent UI Blazor æœ€ä½³å®è·µ
- âœ… ä¼˜åŒ–ä»£ç è´¨é‡å’Œæ€§èƒ½
- âœ… ç»Ÿä¸€ä»£ç é£æ ¼å’Œæ¶æ„æ¨¡å¼
- âœ… æä¾›å®Œæ•´çš„æ–‡æ¡£å’Œæµ‹è¯•è¦†ç›–

### 1.3 QingFeng é¡¹ç›®ç‰¹æ€§æ€»ç»“

QingFeng æ˜¯ä¸€æ¬¾åŠŸèƒ½å®Œå–„çš„å®¶åº­æœåŠ¡å™¨ä¸»é¡µï¼Œå…·å¤‡ä»¥ä¸‹åŠŸèƒ½ï¼š

**æ ¸å¿ƒåŠŸèƒ½æ¨¡å—**:
1. **ä¸ªæ€§åŒ–ä¸»é¡µ**: è‡ªå®šä¹‰å¿«æ·æ–¹å¼ã€Dock æ ã€åº”ç”¨ç®¡ç†
2. **ç³»ç»Ÿç›‘æ§**: CPUã€å†…å­˜ã€ç£ç›˜ã€ç½‘ç»œå®æ—¶ç›‘æ§
3. **ç£ç›˜ç®¡ç†**: æœ¬åœ°ç£ç›˜æŒ‚è½½ã€ç½‘ç»œç£ç›˜ï¼ˆSMB/NFSï¼‰ã€ç”µæºç®¡ç†
4. **å…±äº«ç›®å½•ç®¡ç†**: Samba/CIFS å’Œ NFS å…±äº«é…ç½®
5. **Docker ç®¡ç†**: å®¹å™¨å’Œé•œåƒç®¡ç†
6. **æ–‡ä»¶ç®¡ç†å™¨**: å®Œæ•´çš„æ–‡ä»¶æ“ä½œã€é¢„è§ˆã€ä¸Šä¼ ä¸‹è½½
7. **Anydrop**: è·¨è®¾å¤‡æ–‡ä»¶ä¼ è¾“å’Œæ¶ˆæ¯åˆ†äº«
8. **ç”¨æˆ·è®¤è¯**: ç™»å½•ã€æƒé™ç®¡ç†
9. **è®¡åˆ’ä»»åŠ¡**: å®šæ—¶ä»»åŠ¡è°ƒåº¦å’Œæ‰§è¡Œå†å²
10. **æœ¬åœ°åŒ–**: å¤šè¯­è¨€æ”¯æŒ
11. **ç³»ç»Ÿè®¾ç½®**: å…¨å±€é…ç½®ç®¡ç†
12. **é€šçŸ¥æœåŠ¡**: å®æ—¶é€šçŸ¥ç³»ç»Ÿï¼Œæ”¯æŒå¤šç§ç±»å‹é€šçŸ¥ï¼ˆä¿¡æ¯ã€æˆåŠŸã€è­¦å‘Šã€é”™è¯¯ï¼‰

---

## 2. å½“å‰çŠ¶æ€åˆ†æ

### 2.1 MingYue ç°æœ‰å®ç°

**å·²å®ç°çš„åŠŸèƒ½**:
- âœ… åŸºç¡€æ¶æ„ï¼ˆBlazor Server + FluentUIï¼‰
- âœ… SQLite æ•°æ®åº“å’Œ EF Core
- âœ… ç³»ç»Ÿç›‘æ§æœåŠ¡ï¼ˆCPUã€å†…å­˜ã€ç½‘ç»œã€ç£ç›˜ï¼‰
- âœ… æ–‡ä»¶ç®¡ç†æœåŠ¡ï¼ˆå®Œæ•´çš„ CRUD æ“ä½œï¼‰
- âœ… ç£ç›˜ç®¡ç†æœåŠ¡ï¼ˆæŒ‚è½½ã€ç½‘ç»œç£ç›˜ã€ç”µæºç®¡ç†ï¼‰
- âœ… å…±äº«ç›®å½•ç®¡ç†æœåŠ¡ï¼ˆåˆæ­¥å®ç°ï¼‰
- âœ… Docker æœåŠ¡ï¼ˆåŸºç¡€åŠŸèƒ½ï¼‰

**æ•°æ®åº“æ¶æ„**:
- âœ… å·²æ¿€æ´»: `FavoriteFolder`ï¼ˆæ”¶è—å¤¹ï¼‰
- ğŸ”„ å·²å®šä¹‰ä½†æœªæ¿€æ´»:
  - `Application`, `DockItem`, `SystemSetting`
  - `User`, `ScheduledTask`, `ScheduledTaskExecutionHistory`
  - `AnydropMessage`, `AnydropAttachment`
  - `FileIndex`, `Thumbnail`
  - `Notification`ï¼ˆæ–°å¢ï¼‰


**UI ç»„ä»¶**:
- âœ… MainLayoutï¼ˆä¸»å¸ƒå±€ï¼‰
- âœ… Homeï¼ˆä¸»é¡µä»ªè¡¨æ¿ï¼‰
- âœ… Error/NotFound é¡µé¢
- âœ… é‡è¿æ¨¡æ€æ¡†

### 2.2 QingFeng å®Œæ•´åŠŸèƒ½æ¸…å•

**Services (37 ä¸ªæœåŠ¡)**:
```
æ ¸å¿ƒæœåŠ¡:
- SystemMonitorService âœ… (MingYueå·²æœ‰)
- FileManagerService âœ… (MingYueå·²æœ‰)
- DiskManagementService âœ… (MingYueå·²æœ‰)
- ShareManagementService âœ… (MingYueå·²æœ‰)
- DockerService âœ… (MingYueå·²æœ‰ï¼Œéœ€å¢å¼º)

å¾…è¿ç§»æœåŠ¡:
- AuthenticationService âŒ
- AuthenticationStateService âŒ
- ApplicationService âŒ
- DockItemService âŒ
- SystemSettingService âŒ
- LocalizationService âŒ
- NetworkManagementService âŒ
- AnydropService âŒ
- FileIndexService âŒ
- FileUploadService âŒ
- ThumbnailService âŒ
- ScheduledTaskService âŒ
- ScheduledTaskExecutionHistoryService âŒ
- ScheduledTaskExecutorService âŒ
- NotificationService âŒ (æ–°å¢)
```

**Components/Pages (17 ä¸ªé¡µé¢)**:
```
å·²è¿ç§»:
- Home.razor âœ… (åŸºç¡€ç‰ˆæœ¬)
- SystemMonitor.razor âœ… (åŸºç¡€ç‰ˆæœ¬)
- Error.razor âœ…
- NotFound.razor âœ…

å¾…è¿ç§»:
- Login.razor âŒ
- InitialSetup.razor âŒ
- AppManagement.razor âŒ
- DockManagement.razor âŒ
- Docker.razor âŒ (éœ€å¢å¼º)
- FileManager.razor âŒ (éœ€å®Œæ•´UI)
- DiskManagement.razor âŒ (éœ€å®Œæ•´UI)
- ShareManagement.razor âŒ (éœ€å®Œæ•´UI)
- Anydrop.razor âŒ
- ScheduledTasks.razor âŒ
- Settings.razor âŒ
- UserManagement.razor âŒ
```

**Endpoints (API å±‚)**:
```
å¾…è¿ç§»:
- AuthenticationEndpoints âŒ
- ApplicationEndpoints âŒ
- DockItemEndpoints âŒ
- AnydropEndpoints âŒ
- ScheduledTaskEndpoints âŒ
- SystemSettingEndpoints âŒ
- NotificationEndpoints âŒ

å·²æœ‰ä½†éœ€å¢å¼º:
- SystemMonitorEndpoints âœ…
- FileManagerEndpoints âœ…
- DiskManagementEndpoints âœ…
- ShareManagementEndpoints âœ…
- DockerEndpoints âœ…
```

**Models (æ•°æ®æ¨¡å‹)**:
```
å¾…è¿ç§»çº¦ 30+ ä¸ªæ¨¡å‹ç±»å’Œ DTO
```

---

## 3. è¿ç§»ç­–ç•¥

### 3.1 è¿ç§»åŸåˆ™

1. **æ¸è¿›å¼è¿ç§»**: æŒ‰åŠŸèƒ½æ¨¡å—é€æ­¥è¿ç§»ï¼Œç¡®ä¿æ¯ä¸ªé˜¶æ®µéƒ½å¯ç‹¬ç«‹æµ‹è¯•
2. **é‡æ„ä¼˜å…ˆ**: ä¸ç›´æ¥å¤åˆ¶ä»£ç ï¼Œè€Œæ˜¯æ ¹æ® MingYue çš„æœ€ä½³å®è·µé‡æ„
3. **FluentUI ä¼˜å…ˆ**: ä½¿ç”¨ FluentUI Blazor ç»„ä»¶æ›¿ä»£ QingFeng çš„ MudBlazor/Bootstrap
4. **æµ‹è¯•é©±åŠ¨**: æ¯ä¸ªåŠŸèƒ½è¿ç§»åç«‹å³ç¼–å†™å•å…ƒæµ‹è¯•
5. **æ–‡æ¡£åŒæ­¥**: åŒæ­¥æ›´æ–°ç›¸å…³æ–‡æ¡£

### 3.2 ä¼˜å…ˆçº§åˆ’åˆ†

**P0 - æ ¸å¿ƒåŸºç¡€è®¾æ–½** (ç¬¬1-2å‘¨):
- ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- æ•°æ®åº“æ¶æ„å®Œå–„
- åŸºç¡€ UI å¸ƒå±€å’Œå¯¼èˆª

**P1 - ä¸»è¦åŠŸèƒ½** (ç¬¬3-5å‘¨):
- åº”ç”¨å’Œ Dock ç®¡ç†
- å®Œæ•´çš„æ–‡ä»¶ç®¡ç†å™¨ UI
- Docker ç®¡ç†å¢å¼º
- ç£ç›˜å’Œå…±äº«ç®¡ç† UI

**P2 - é«˜çº§åŠŸèƒ½** (ç¬¬6-8å‘¨):
- Anydrop æ–‡ä»¶ä¼ è¾“
- è®¡åˆ’ä»»åŠ¡
- ç³»ç»Ÿè®¾ç½®
- é€šçŸ¥æœåŠ¡

**P3 - ä¼˜åŒ–å’Œå®Œå–„** (ç¬¬9-10å‘¨):
- æœ¬åœ°åŒ–æ”¯æŒ
- æ€§èƒ½ä¼˜åŒ–
- æ–‡æ¡£å’Œæµ‹è¯•
- UI/UX ä¼˜åŒ–

### 3.3 æŠ€æœ¯æ ˆè°ƒæ•´

| ç»„ä»¶ | QingFeng | MingYue | è¿ç§»ç­–ç•¥ |
|------|----------|---------|----------|
| UI æ¡†æ¶ | MudBlazor â†’ FluentUI | FluentUI âœ… | ä¿æŒ FluentUI |
| .NET ç‰ˆæœ¬ | .NET 10.0 | .NET 10.0 | æ— éœ€è°ƒæ•´ |
| æ•°æ®åº“ | SQLite + EF Core | SQLite + EF Core | æ— éœ€è°ƒæ•´ |
| èº«ä»½è®¤è¯ | Custom + ProtectedLocalStorage | å¾…å®ç° | è¿ç§»å®ç° |
| æ–‡ä»¶é¢„è§ˆ | PDF.js, Mammoth.js, SheetJS | å¾…å®ç° | è¿ç§»å®ç° |

---

## 4. è¯¦ç»†è¿ç§»è®¡åˆ’

### Phase 1: æ ¸å¿ƒåŸºç¡€è®¾æ–½ (ç¬¬1-2å‘¨)

#### 1.1 ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
**ç›®æ ‡**: å®ç°å®Œæ•´çš„ç”¨æˆ·ç™»å½•ã€æ³¨å†Œã€æƒé™ç®¡ç†

**è¿ç§»å†…å®¹**:
- `AuthenticationService.cs` - ç”¨æˆ·è®¤è¯é€»è¾‘
- `AuthenticationStateService.cs` - è®¤è¯çŠ¶æ€ç®¡ç†
- `Login.razor` - ç™»å½•é¡µé¢
- `InitialSetup.razor` - åˆå§‹åŒ–è®¾ç½®é¡µé¢
- `UserManagement.razor` - ç”¨æˆ·ç®¡ç†é¡µé¢
- `AuthenticationEndpoints.cs` - è®¤è¯ API

**æ•°æ®åº“å˜æ›´**:
```csharp
// å¯ç”¨ User è¡¨
public class User
{
    public int Id { get; set; }
    public string Username { get; set; } = string.Empty;
    public string PasswordHash { get; set; } = string.Empty;
    public string Role { get; set; } = "User"; // Admin/User
    public DateTime CreatedAt { get; set; }
    public DateTime? LastLoginAt { get; set; }
}
```

**é‡æ„è¦ç‚¹**:
- ä½¿ç”¨ ASP.NET Core Identity æˆ–è‡ªå®šä¹‰è®¤è¯ä¸­é—´ä»¶
- å¯†ç å“ˆå¸Œä½¿ç”¨ BCrypt æˆ– PBKDF2
- å®ç° JWT æˆ– Cookie è®¤è¯
- éµå¾ª OWASP å®‰å…¨æœ€ä½³å®è·µ

**éªŒæ”¶æ ‡å‡†**:
- [ ] ç”¨æˆ·å¯ä»¥æ³¨å†Œå’Œç™»å½•
- [ ] å¯†ç å®‰å…¨å­˜å‚¨ï¼ˆå“ˆå¸Œ+ç›ï¼‰
- [ ] ä¼šè¯ç®¡ç†å’Œè¶…æ—¶
- [ ] åˆæ¬¡è¿è¡Œå¼•å¯¼è®¾ç½®ç®¡ç†å‘˜è´¦æˆ·
- [ ] ç”¨æˆ·æƒé™æ§åˆ¶ï¼ˆAdmin/Userï¼‰

#### 1.2 åº”ç”¨å’Œ Dock ç®¡ç†
**ç›®æ ‡**: å®ç°ä¸ªæ€§åŒ–ä¸»é¡µçš„æ ¸å¿ƒåŠŸèƒ½

**è¿ç§»å†…å®¹**:
- `ApplicationService.cs` - åº”ç”¨ç®¡ç†æœåŠ¡
- `DockItemService.cs` - Dock é¡¹ç®¡ç†æœåŠ¡
- `AppManagement.razor` - åº”ç”¨ç®¡ç†é¡µé¢
- `DockManagement.razor` - Dock ç®¡ç†é¡µé¢
- `ApplicationEndpoints.cs` - åº”ç”¨ API
- `DockItemEndpoints.cs` - Dock API

**æ•°æ®åº“å˜æ›´**:
```csharp
// å¯ç”¨ Application å’Œ DockItem è¡¨
public class Application
{
    public int Id { get; set; }
    public string Name { get; set; } = string.Empty;
    public string Url { get; set; } = string.Empty;
    public string Icon { get; set; } = string.Empty;
    public string Description { get; set; } = string.Empty;
    public int Order { get; set; }
    public bool IsVisible { get; set; } = true;
}

public class DockItem
{
    public int Id { get; set; }
    public string Name { get; set; } = string.Empty;
    public string Url { get; set; } = string.Empty;
    public string Icon { get; set; } = string.Empty;
    public int Order { get; set; }
    public bool IsPinned { get; set; } = true;
}
```

**é‡æ„è¦ç‚¹**:
- ä½¿ç”¨ FluentUI çš„ DataGrid ç»„ä»¶
- æ‹–æ”¾æ’åºåŠŸèƒ½
- å›¾æ ‡é€‰æ‹©å™¨ç»„ä»¶
- è¡¨å•éªŒè¯

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤åº”ç”¨
- [ ] å›ºå®š/å–æ¶ˆå›ºå®šåˆ° Dock
- [ ] æ‹–æ‹½æ’åº
- [ ] ä» Docker å®¹å™¨å¿«é€Ÿåˆ›å»ºåº”ç”¨
- [ ] å›¾æ ‡è‡ªå®šä¹‰

#### 1.3 ä¸»é¡µé‡æ„
**ç›®æ ‡**: å®ç°å®Œæ•´çš„ä¸ªæ€§åŒ–ä¸»é¡µ

**è¿ç§»å†…å®¹**:
- å¢å¼º `Home.razor` - æ·»åŠ åº”ç”¨ç½‘æ ¼ã€Dock æ 
- å¿«æ·æ–¹å¼ç®¡ç†
- ç³»ç»Ÿä¿¡æ¯å¡ç‰‡

**é‡æ„è¦ç‚¹**:
- ä½¿ç”¨ FluentUI çš„å“åº”å¼ç½‘æ ¼å¸ƒå±€
- å¡ç‰‡å¼è®¾è®¡
- å®æ—¶ç³»ç»Ÿç›‘æ§å°éƒ¨ä»¶
- ç¾è§‚çš„å›¾æ ‡å’ŒåŠ¨ç”»

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ˜¾ç¤ºæ‰€æœ‰åº”ç”¨ï¼ˆç½‘æ ¼æˆ–åˆ—è¡¨è§†å›¾ï¼‰
- [ ] Dock æ æ˜¾ç¤ºå›ºå®šåº”ç”¨
- [ ] ç³»ç»Ÿç›‘æ§æ‘˜è¦å¡ç‰‡
- [ ] å¿«é€Ÿæœç´¢å’Œè¿‡æ»¤
- [ ] å“åº”å¼è®¾è®¡ï¼ˆç§»åŠ¨ç«¯é€‚é…ï¼‰

---

### Phase 2: ä¸»è¦åŠŸèƒ½è¿ç§» (ç¬¬3-5å‘¨)

#### 2.1 æ–‡ä»¶ç®¡ç†å™¨å®Œæ•´ UI
**ç›®æ ‡**: å®ç°åŠŸèƒ½å®Œå–„çš„æ–‡ä»¶ç®¡ç†ç•Œé¢

**è¿ç§»å†…å®¹**:
- `FileManager.razor` - å®Œæ•´æ–‡ä»¶ç®¡ç†å™¨é¡µé¢
- æ–‡ä»¶é¢„è§ˆç»„ä»¶ï¼ˆå›¾ç‰‡ã€æ–‡æœ¬ã€PDFã€Officeï¼‰
- æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ï¼ˆæ”¯æŒæ‹–æ‹½ã€å¤šæ–‡ä»¶ã€è¿›åº¦ï¼‰
- `FileUploadService.cs` - æ–‡ä»¶ä¸Šä¼ æœåŠ¡
- `ThumbnailService.cs` - ç¼©ç•¥å›¾æœåŠ¡
- `FileIndexService.cs` - æ–‡ä»¶ç´¢å¼•æœåŠ¡

**æ•°æ®åº“å˜æ›´**:
```csharp
// å¯ç”¨ FileIndex å’Œ Thumbnail è¡¨
public class FileIndex
{
    public int Id { get; set; }
    public string FilePath { get; set; } = string.Empty;
    public string FileName { get; set; } = string.Empty;
    public long FileSize { get; set; }
    public DateTime ModifiedAt { get; set; }
    public string FileType { get; set; } = string.Empty;
    public DateTime IndexedAt { get; set; }
}

public class Thumbnail
{
    public int Id { get; set; }
    public string FilePath { get; set; } = string.Empty;
    public byte[] ThumbnailData { get; set; } = Array.Empty<byte>();
    public DateTime CreatedAt { get; set; }
}
```

**é‡æ„è¦ç‚¹**:
- ä½¿ç”¨ FluentUI çš„æ–‡ä»¶é€‰æ‹©å™¨å’Œæ ‘å½¢æ§ä»¶
- é›†æˆ PDF.js è¿›è¡Œ PDF é¢„è§ˆ
- é›†æˆ Mammoth.js è¿›è¡Œ Word é¢„è§ˆ
- é›†æˆ SheetJS è¿›è¡Œ Excel é¢„è§ˆ
- æ‹–æ‹½ä¸Šä¼ 
- è™šæ‹ŸåŒ–é•¿åˆ—è¡¨

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ–‡ä»¶æµè§ˆï¼ˆç½‘æ ¼/åˆ—è¡¨è§†å›¾ï¼‰
- [ ] æ–‡ä»¶æ“ä½œï¼ˆåˆ›å»ºã€åˆ é™¤ã€é‡å‘½åã€å¤åˆ¶ã€ç§»åŠ¨ï¼‰
- [ ] æ–‡ä»¶æœç´¢ï¼ˆæ”¯æŒé€šé…ç¬¦ï¼‰
- [ ] æ–‡ä»¶ä¸Šä¼ ï¼ˆå¤šæ–‡ä»¶ã€å¤§æ–‡ä»¶ã€è¿›åº¦ï¼‰
- [ ] æ–‡ä»¶ä¸‹è½½
- [ ] æ–‡ä»¶é¢„è§ˆï¼ˆå›¾ç‰‡ã€æ–‡æœ¬ã€PDFã€Wordã€Excelï¼‰
- [ ] ç¼©ç•¥å›¾ç”Ÿæˆå’Œç¼“å­˜
- [ ] é¢åŒ…å±‘å¯¼èˆª
- [ ] æ–‡ä»¶å¤¹æ”¶è—

#### 2.2 Docker ç®¡ç†å¢å¼º
**ç›®æ ‡**: æä¾›å®Œæ•´çš„ Docker å®¹å™¨å’Œé•œåƒç®¡ç†

**è¿ç§»å†…å®¹**:
- å¢å¼º `DockerService.cs` - æ·»åŠ æ›´å¤š Docker æ“ä½œ
- å®Œå–„ `Docker.razor` - å®¹å™¨å’Œé•œåƒç®¡ç†ç•Œé¢
- Docker æ—¥å¿—æŸ¥çœ‹
- å¿«é€Ÿåˆ›å»ºå¿«æ·æ–¹å¼

**é‡æ„è¦ç‚¹**:
- ä½¿ç”¨ FluentUI çš„é€‰é¡¹å¡å’Œè¡¨æ ¼ç»„ä»¶
- å®æ—¶çŠ¶æ€æ›´æ–°
- æ—¥å¿—æµå¼æ˜¾ç¤º

**éªŒæ”¶æ ‡å‡†**:
- [ ] å®¹å™¨åˆ—è¡¨ï¼ˆçŠ¶æ€ã€ç«¯å£ã€é•œåƒï¼‰
- [ ] å®¹å™¨æ“ä½œï¼ˆå¯åŠ¨ã€åœæ­¢ã€é‡å¯ã€åˆ é™¤ï¼‰
- [ ] é•œåƒåˆ—è¡¨
- [ ] é•œåƒæ“ä½œï¼ˆåˆ é™¤ã€æ‹‰å–ï¼‰
- [ ] å®¹å™¨æ—¥å¿—æŸ¥çœ‹
- [ ] ä»å®¹å™¨åˆ›å»ºåº”ç”¨å¿«æ·æ–¹å¼

#### 2.3 ç£ç›˜å’Œå…±äº«ç®¡ç† UI
**ç›®æ ‡**: æä¾›å‹å¥½çš„ç£ç›˜å’Œå…±äº«ç®¡ç†ç•Œé¢

**è¿ç§»å†…å®¹**:
- `DiskManagement.razor` - ç£ç›˜ç®¡ç†é¡µé¢
- `ShareManagement.razor` - å…±äº«ç®¡ç†é¡µé¢
- æŒ‚è½½å‘å¯¼
- ç½‘ç»œç£ç›˜é…ç½®

**é‡æ„è¦ç‚¹**:
- ä½¿ç”¨ FluentUI çš„å‘å¯¼ç»„ä»¶
- è¡¨å•éªŒè¯
- æ“ä½œç¡®è®¤å¯¹è¯æ¡†

**éªŒæ”¶æ ‡å‡†**:
- [ ] ç£ç›˜åˆ—è¡¨ï¼ˆæœ¬åœ°ç£ç›˜å’Œç½‘ç»œç£ç›˜ï¼‰
- [ ] æŒ‚è½½/å¸è½½æ“ä½œ
- [ ] ä¸´æ—¶/æ°¸ä¹…æŒ‚è½½
- [ ] ç½‘ç»œç£ç›˜æŒ‚è½½å‘å¯¼ï¼ˆSMB/NFSï¼‰
- [ ] ç£ç›˜ç”µæºç®¡ç†ï¼ˆä¼‘çœ ã€APMï¼‰
- [ ] å…±äº«ç›®å½•åˆ—è¡¨ï¼ˆSamba/NFSï¼‰
- [ ] æ·»åŠ /ç¼–è¾‘/åˆ é™¤å…±äº«
- [ ] æœåŠ¡é‡å¯

---

### Phase 3: é«˜çº§åŠŸèƒ½è¿ç§» (ç¬¬6-8å‘¨)

#### 3.1 Anydrop æ–‡ä»¶ä¼ è¾“
**ç›®æ ‡**: å®ç°è·¨è®¾å¤‡æ–‡ä»¶å’Œæ¶ˆæ¯åˆ†äº«

**è¿ç§»å†…å®¹**:
- `AnydropService.cs` - Anydrop æœåŠ¡
- `Anydrop.razor` - Anydrop é¡µé¢
- `AnydropEndpoints.cs` - Anydrop API

**æ•°æ®åº“å˜æ›´**:
```csharp
// å¯ç”¨ AnydropMessage å’Œ AnydropAttachment è¡¨
public class AnydropMessage
{
    public int Id { get; set; }
    public string Content { get; set; } = string.Empty;
    public string SenderDeviceId { get; set; } = string.Empty;
    public DateTime CreatedAt { get; set; }
    public bool IsRead { get; set; } = false;
}

public class AnydropAttachment
{
    public int Id { get; set; }
    public int MessageId { get; set; }
    public string FileName { get; set; } = string.Empty;
    public string FilePath { get; set; } = string.Empty;
    public long FileSize { get; set; }
    public DateTime CreatedAt { get; set; }
}
```

**é‡æ„è¦ç‚¹**:
- ä½¿ç”¨ FluentUI çš„æ¶ˆæ¯åˆ—è¡¨å’Œå¡ç‰‡
- æ‹–æ‹½ä¸Šä¼ æ–‡ä»¶
- å®æ—¶é€šçŸ¥

**éªŒæ”¶æ ‡å‡†**:
- [ ] å‘é€æ–‡æœ¬æ¶ˆæ¯
- [ ] å‘é€æ–‡ä»¶é™„ä»¶
- [ ] æ¥æ”¶å’ŒæŸ¥çœ‹æ¶ˆæ¯
- [ ] ä¸‹è½½é™„ä»¶
- [ ] åˆ é™¤æ¶ˆæ¯
- [ ] æœªè¯»æ ‡è®°
- [ ] è®¾å¤‡è¯†åˆ«

#### 3.2 è®¡åˆ’ä»»åŠ¡
**ç›®æ ‡**: å®ç°å®šæ—¶ä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ

**è¿ç§»å†…å®¹**:
- `ScheduledTaskService.cs` - ä»»åŠ¡ç®¡ç†æœåŠ¡
- `ScheduledTaskExecutionHistoryService.cs` - æ‰§è¡Œå†å²æœåŠ¡
- `ScheduledTaskExecutorService.cs` - åå°æ‰§è¡ŒæœåŠ¡
- `ScheduledTasks.razor` - è®¡åˆ’ä»»åŠ¡é¡µé¢
- `ScheduledTaskEndpoints.cs` - ä»»åŠ¡ API

**æ•°æ®åº“å˜æ›´**:
```csharp
// å¯ç”¨ ScheduledTask å’Œ ScheduledTaskExecutionHistory è¡¨
public class ScheduledTask
{
    public int Id { get; set; }
    public string Name { get; set; } = string.Empty;
    public string Description { get; set; } = string.Empty;
    public string TaskType { get; set; } = string.Empty; // Script, Command, Http
    public string TaskData { get; set; } = string.Empty; // JSONé…ç½®
    public string CronExpression { get; set; } = string.Empty;
    public bool IsEnabled { get; set; } = true;
    public DateTime? LastRunAt { get; set; }
    public DateTime? NextRunAt { get; set; }
}

public class ScheduledTaskExecutionHistory
{
    public int Id { get; set; }
    public int TaskId { get; set; }
    public DateTime StartedAt { get; set; }
    public DateTime? CompletedAt { get; set; }
    public bool Success { get; set; }
    public string Output { get; set; } = string.Empty;
    public string ErrorMessage { get; set; } = string.Empty;
}
```

**é‡æ„è¦ç‚¹**:
- ä½¿ç”¨ Cron è¡¨è¾¾å¼è§£æå™¨
- åå°æœåŠ¡ï¼ˆIHostedServiceï¼‰
- ä»»åŠ¡æ‰§è¡Œæ—¥å¿—
- é”™è¯¯é‡è¯•æœºåˆ¶

**éªŒæ”¶æ ‡å‡†**:
- [ ] åˆ›å»º/ç¼–è¾‘/åˆ é™¤ä»»åŠ¡
- [ ] Cron è¡¨è¾¾å¼ç¼–è¾‘å™¨
- [ ] æ‰‹åŠ¨æ‰§è¡Œä»»åŠ¡
- [ ] å¯ç”¨/ç¦ç”¨ä»»åŠ¡
- [ ] æŸ¥çœ‹æ‰§è¡Œå†å²
- [ ] æŸ¥çœ‹ä»»åŠ¡è¾“å‡ºå’Œé”™è¯¯
- [ ] ä»»åŠ¡ç±»å‹ï¼ˆè„šæœ¬ã€å‘½ä»¤ã€HTTPï¼‰

#### 3.3 ç³»ç»Ÿè®¾ç½®
**ç›®æ ‡**: æä¾›å…¨å±€é…ç½®ç®¡ç†

**è¿ç§»å†…å®¹**:
- `SystemSettingService.cs` - ç³»ç»Ÿè®¾ç½®æœåŠ¡
- `Settings.razor` - è®¾ç½®é¡µé¢
- `SystemSettingEndpoints.cs` - è®¾ç½® API

**æ•°æ®åº“å˜æ›´**:
```csharp
// å¯ç”¨ SystemSetting è¡¨
public class SystemSetting
{
    public int Id { get; set; }
    public string Key { get; set; } = string.Empty;
    public string Value { get; set; } = string.Empty;
    public string Category { get; set; } = string.Empty; // General, Appearance, Security
    public DateTime UpdatedAt { get; set; }
}
```

**é‡æ„è¦ç‚¹**:
- ä½¿ç”¨ FluentUI çš„è®¾ç½®é¢æ¿
- åˆ†ç±»ç»„ç»‡è®¾ç½®
- å®æ—¶é¢„è§ˆ

**éªŒæ”¶æ ‡å‡†**:
- [ ] å¸¸è§„è®¾ç½®ï¼ˆè¯­è¨€ã€æ—¶åŒºï¼‰
- [ ] å¤–è§‚è®¾ç½®ï¼ˆä¸»é¢˜ã€é¢œè‰²ï¼‰
- [ ] å®‰å…¨è®¾ç½®ï¼ˆä¼šè¯è¶…æ—¶ï¼‰
- [ ] æ–‡ä»¶ç®¡ç†è®¾ç½®ï¼ˆä¸Šä¼ å¤§å°é™åˆ¶ï¼‰
- [ ] Docker è®¾ç½®ï¼ˆè¿æ¥åœ°å€ï¼‰
- [ ] è®¾ç½®å¯¼å…¥/å¯¼å‡º

#### 3.4 é€šçŸ¥æœåŠ¡
**ç›®æ ‡**: å®ç°å®æ—¶é€šçŸ¥ç³»ç»Ÿ

**è¿ç§»å†…å®¹**:
- `NotificationService.cs` - é€šçŸ¥æœåŠ¡
- `INotificationService.cs` - é€šçŸ¥æœåŠ¡æ¥å£
- `Notification` æ•°æ®æ¨¡å‹
- é€šçŸ¥é¢æ¿ç»„ä»¶ï¼ˆMainLayout é›†æˆï¼‰
- `NotificationEndpoints.cs` - é€šçŸ¥ API

**æ•°æ®åº“å˜æ›´**:
```csharp
// å¯ç”¨ Notification è¡¨
public class Notification
{
    public int Id { get; set; }
    public string Title { get; set; } = string.Empty;
    public string Message { get; set; } = string.Empty;
    public string Type { get; set; } = "Info"; // Info, Success, Warning, Error
    public bool IsRead { get; set; } = false;
    public DateTime CreatedAt { get; set; }
    public string? ActionUrl { get; set; }
    public string? Icon { get; set; }
}
```

**é‡æ„è¦ç‚¹**:
- ä½¿ç”¨ FluentUI çš„å¾½ç« å’Œå¯¹è¯æ¡†ç»„ä»¶
- äº‹ä»¶é©±åŠ¨çš„å®æ—¶æ›´æ–°ï¼ˆOnNotificationChanged äº‹ä»¶ï¼‰
- æœªè¯»è®¡æ•°å™¨è‡ªåŠ¨æ›´æ–°
- ç›¸å¯¹æ—¶é—´æ˜¾ç¤ºï¼ˆåˆšåˆšã€Nåˆ†é’Ÿå‰ç­‰ï¼‰
- æ‰¹é‡æ“ä½œï¼ˆå…¨éƒ¨å·²è¯»ã€æ¸…é™¤å·²è¯»ï¼‰

**éªŒæ”¶æ ‡å‡†**:
- [ ] åˆ›å»ºé€šçŸ¥ï¼ˆæ”¯æŒå¤šç§ç±»å‹ï¼šInfo/Success/Warning/Errorï¼‰
- [ ] MainLayout æ˜¾ç¤ºæœªè¯»è®¡æ•°å¾½ç« 
- [ ] é€šçŸ¥é¢æ¿å±•ç¤ºæ‰€æœ‰é€šçŸ¥
- [ ] æ ‡è®°å•æ¡é€šçŸ¥ä¸ºå·²è¯»
- [ ] æ ‡è®°æ‰€æœ‰é€šçŸ¥ä¸ºå·²è¯»
- [ ] åˆ é™¤å•æ¡é€šçŸ¥
- [ ] æ‰¹é‡åˆ é™¤å·²è¯»é€šçŸ¥
- [ ] é€šçŸ¥å¸¦æ“ä½œé“¾æ¥ï¼ˆå¯é€‰ï¼‰
- [ ] å®æ—¶æ›´æ–°é€šçŸ¥åˆ—è¡¨
- [ ] ç›¸å¯¹æ—¶é—´æ ¼å¼åŒ–

---

### Phase 4: ä¼˜åŒ–å’Œå®Œå–„ (ç¬¬9-10å‘¨)

#### 4.1 æœ¬åœ°åŒ–æ”¯æŒ
**ç›®æ ‡**: å®ç°å¤šè¯­è¨€ç•Œé¢

**è¿ç§»å†…å®¹**:
- `LocalizationService.cs` - æœ¬åœ°åŒ–æœåŠ¡
- Resources æ–‡ä»¶ï¼ˆä¸­æ–‡ã€è‹±æ–‡ï¼‰
- è¯­è¨€åˆ‡æ¢

**é‡æ„è¦ç‚¹**:
- ä½¿ç”¨ ASP.NET Core æœ¬åœ°åŒ–ä¸­é—´ä»¶
- èµ„æºæ–‡ä»¶ç®¡ç†
- å‰ç«¯å­—ç¬¦ä¸²å›½é™…åŒ–

**éªŒæ”¶æ ‡å‡†**:
- [ ] ä¸­æ–‡ç•Œé¢ï¼ˆé»˜è®¤ï¼‰
- [ ] è‹±æ–‡ç•Œé¢
- [ ] è¯­è¨€åˆ‡æ¢åŠŸèƒ½
- [ ] æ‰€æœ‰é¡µé¢å’Œç»„ä»¶æœ¬åœ°åŒ–

#### 4.2 ç½‘ç»œç®¡ç†
**ç›®æ ‡**: å®ç°ç½‘ç»œæ¥å£ç®¡ç†

**è¿ç§»å†…å®¹**:
- `NetworkManagementService.cs` - ç½‘ç»œç®¡ç†æœåŠ¡
- ç½‘ç»œè®¾ç½®é¡µé¢

**é‡æ„è¦ç‚¹**:
- ç½‘ç»œçŠ¶æ€ç›‘æ§
- é™æ€ IP é…ç½®

**éªŒæ”¶æ ‡å‡†**:
- [ ] ç½‘ç»œæ¥å£åˆ—è¡¨
- [ ] ç½‘ç»œç»Ÿè®¡ä¿¡æ¯
- [ ] é™æ€ IP é…ç½®ï¼ˆå¯é€‰ï¼‰

#### 4.3 æ€§èƒ½ä¼˜åŒ–
**ç›®æ ‡**: æå‡åº”ç”¨æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ

**ä¼˜åŒ–é¡¹**:
- [ ] æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–ï¼ˆç´¢å¼•ã€å¼‚æ­¥ï¼‰
- [ ] é•¿åˆ—è¡¨è™šæ‹ŸåŒ–
- [ ] å›¾ç‰‡æ‡’åŠ è½½å’Œç¼©ç•¥å›¾
- [ ] é™æ€èµ„æºå‹ç¼©å’Œç¼“å­˜
- [ ] SignalR è¿æ¥ä¼˜åŒ–
- [ ] å†…å­˜ä½¿ç”¨ä¼˜åŒ–

#### 4.4 æµ‹è¯•å’Œæ–‡æ¡£
**ç›®æ ‡**: å®Œå–„æµ‹è¯•å’Œæ–‡æ¡£

**æµ‹è¯•**:
- [ ] å•å…ƒæµ‹è¯•ï¼ˆServicesï¼‰
- [ ] ç»„ä»¶æµ‹è¯•ï¼ˆä½¿ç”¨ bUnitï¼‰
- [ ] é›†æˆæµ‹è¯•ï¼ˆAPI Endpointsï¼‰
- [ ] ç«¯åˆ°ç«¯æµ‹è¯•ï¼ˆå¯é€‰ï¼‰

**æ–‡æ¡£**:
- [ ] API æ–‡æ¡£
- [ ] ç”¨æˆ·æŒ‡å—
- [ ] å¼€å‘è€…æ–‡æ¡£
- [ ] éƒ¨ç½²æ–‡æ¡£

---

## 5. é‡æ„ä¼˜åŒ–è¦ç‚¹

### 5.1 ä»£ç é£æ ¼ç»Ÿä¸€

**éµå¾ª CODE_STYLE.md**:
- ä½¿ç”¨ file-scoped namespaces
- PascalCase å…¬å…±æˆå‘˜ï¼ŒcamelCase ç§æœ‰å­—æ®µï¼ˆå¸¦ä¸‹åˆ’çº¿ï¼‰
- Async æ–¹æ³•ä»¥ `Async` ç»“å°¾
- ä½¿ç”¨ `ArgumentNullException.ThrowIfNull`

**ç¤ºä¾‹**:
```csharp
namespace MingYue.Services;

public class ApplicationService : IApplicationService
{
    private readonly ILogger<ApplicationService> _logger;
    private readonly IDbContextFactory<MingYueDbContext> _dbContextFactory;

    public ApplicationService(
        ILogger<ApplicationService> logger,
        IDbContextFactory<MingYueDbContext> dbContextFactory)
    {
        ArgumentNullException.ThrowIfNull(logger);
        ArgumentNullException.ThrowIfNull(dbContextFactory);
        
        _logger = logger;
        _dbContextFactory = dbContextFactory;
    }

    public async Task<List<Application>> GetAllAsync()
    {
        using var context = await _dbContextFactory.CreateDbContextAsync();
        return await context.Applications
            .OrderBy(a => a.Order)
            .ToListAsync();
    }
}
```

### 5.2 FluentUI æœ€ä½³å®è·µ

**éµå¾ª FluentUI-Blazor-Guide.md**:

1. **æœåŠ¡æ³¨å†Œ**:
```csharp
builder.Services.AddFluentUIComponents(options =>
{
    options.UseTooltipServiceProvider = true;
    options.ValidateClassNames = true;
});
```

2. **å¸ƒå±€æä¾›å™¨**:
```razor
<FluentDesignTheme StorageName="mingyue-theme" />
<FluentToastProvider />
<FluentDialogProvider />
<FluentTooltipProvider />
<FluentMessageBarProvider />
```

3. **ç»„ä»¶ä½¿ç”¨**:
```razor
<!-- æŒ‰é’® -->
<FluentButton Appearance="Appearance.Accent" OnClick="HandleSubmit">
    ä¿å­˜
</FluentButton>

<!-- æ•°æ®è¡¨æ ¼ -->
<FluentDataGrid Items="@applications" Virtualize="true">
    <PropertyColumn Property="@(a => a.Name)" Sortable="true" />
    <PropertyColumn Property="@(a => a.Url)" />
    <TemplateColumn Title="æ“ä½œ">
        <FluentButton OnClick="@(() => EditApp(context))">ç¼–è¾‘</FluentButton>
    </TemplateColumn>
</FluentDataGrid>

<!-- è¡¨å• -->
<EditForm Model="@model" OnValidSubmit="@HandleValidSubmit">
    <DataAnnotationsValidator />
    <FluentTextField @bind-Value="model.Name" Label="åç§°" Required="true" />
    <FluentValidationMessage For="@(() => model.Name)" />
    <FluentButton Type="ButtonType.Submit" Loading="@isSubmitting">æäº¤</FluentButton>
</EditForm>
```

### 5.3 å®‰å…¨æ€§åŠ å›º

**å¯†ç å­˜å‚¨**:
```csharp
// ä½¿ç”¨ BCrypt æˆ– PBKDF2
public string HashPassword(string password)
{
    return BCrypt.Net.BCrypt.HashPassword(password, BCrypt.Net.BCrypt.GenerateSalt());
}

public bool VerifyPassword(string password, string hash)
{
    return BCrypt.Net.BCrypt.Verify(password, hash);
}
```

**è¾“å…¥éªŒè¯**:
```csharp
// æ–‡ä»¶è·¯å¾„éªŒè¯
public bool IsPathSafe(string path)
{
    var normalizedPath = Path.GetFullPath(path);
    var allowedRoot = Path.GetFullPath("/");
    return normalizedPath.StartsWith(allowedRoot);
}

// Shell å‘½ä»¤å‚æ•°éªŒè¯
public string EscapeShellArgument(string argument)
{
    return $"\"{argument.Replace("\"", "\\\"")}\"";
}
```

**æƒé™æ£€æŸ¥**:
```csharp
// æ£€æŸ¥ç”¨æˆ·æƒé™
public async Task<bool> HasPermissionAsync(string userId, string permission)
{
    using var context = await _dbContextFactory.CreateDbContextAsync();
    var user = await context.Users.FindAsync(userId);
    return user?.Role == "Admin" || user?.Permissions.Contains(permission) == true;
}
```

### 5.4 æ€§èƒ½ä¼˜åŒ–

**æ•°æ®åº“æŸ¥è¯¢**:
```csharp
// ä½¿ç”¨å¼‚æ­¥å’ŒæŠ•å½±
public async Task<List<ApplicationDto>> GetApplicationsAsync()
{
    using var context = await _dbContextFactory.CreateDbContextAsync();
    return await context.Applications
        .AsNoTracking()
        .Select(a => new ApplicationDto
        {
            Id = a.Id,
            Name = a.Name,
            Url = a.Url,
            Icon = a.Icon
        })
        .ToListAsync();
}
```

**ç¼“å­˜ç­–ç•¥**:
```csharp
// ç¼©ç•¥å›¾ç¼“å­˜
private readonly MemoryCache _thumbnailCache = new MemoryCache(new MemoryCacheOptions
{
    SizeLimit = 100 // é™åˆ¶ç¼“å­˜æ¡ç›®æ•°
});

public async Task<byte[]> GetThumbnailAsync(string filePath)
{
    if (_thumbnailCache.TryGetValue(filePath, out byte[] cachedThumbnail))
    {
        return cachedThumbnail;
    }

    var thumbnail = await GenerateThumbnailAsync(filePath);
    _thumbnailCache.Set(filePath, thumbnail, new MemoryCacheEntryOptions
    {
        Size = 1,
        SlidingExpiration = TimeSpan.FromMinutes(30)
    });

    return thumbnail;
}
```

**è™šæ‹ŸåŒ–**:
```razor
<!-- ä½¿ç”¨ Virtualize ç»„ä»¶å¤„ç†é•¿åˆ—è¡¨ -->
<FluentDataGrid Items="@items" Virtualize="true" ItemSize="50">
    <!-- åˆ—å®šä¹‰ -->
</FluentDataGrid>
```

### 5.5 é”™è¯¯å¤„ç†

**OperationResult æ¨¡å¼**:
```csharp
public enum ResultCode
{
    Success,
    NotFound,
    Conflict,
    ValidationError,
    Forbidden,
    InternalError
}

public class OperationResult
{
    public bool Success { get; init; }
    public ResultCode Code { get; init; }
    public string Message { get; init; } = string.Empty;
}

public class OperationResult<T> : OperationResult
{
    public T? Data { get; init; }
}

// ä½¿ç”¨ç¤ºä¾‹
public async Task<OperationResult<Application>> CreateApplicationAsync(Application app)
{
    try
    {
        ArgumentNullException.ThrowIfNull(app);
        
        if (string.IsNullOrWhiteSpace(app.Name))
        {
            return new OperationResult<Application>
            {
                Success = false,
                Code = ResultCode.ValidationError,
                Message = "åº”ç”¨åç§°ä¸èƒ½ä¸ºç©º"
            };
        }

        using var context = await _dbContextFactory.CreateDbContextAsync();
        context.Applications.Add(app);
        await context.SaveChangesAsync();

        return new OperationResult<Application>
        {
            Success = true,
            Code = ResultCode.Success,
            Data = app
        };
    }
    catch (Exception ex)
    {
        _logger.LogError(ex, "åˆ›å»ºåº”ç”¨å¤±è´¥");
        return new OperationResult<Application>
        {
            Success = false,
            Code = ResultCode.InternalError,
            Message = "åˆ›å»ºåº”ç”¨æ—¶å‘ç”Ÿé”™è¯¯"
        };
    }
}
```

---

## 6. æŠ€æœ¯æ ˆå¯¹æ¯”

| ç±»åˆ« | QingFeng | MingYue | è¿ç§»ç­–ç•¥ |
|------|----------|---------|----------|
| **æ¡†æ¶** | .NET 10.0 | .NET 10.0 | âœ… ä¿æŒ |
| **Blazor** | Server | Server | âœ… ä¿æŒ |
| **UI åº“** | MudBlazor â†’ FluentUI | FluentUI | âœ… ä¿æŒ FluentUI |
| **æ•°æ®åº“** | SQLite | SQLite | âœ… ä¿æŒ |
| **ORM** | EF Core 10.0 | EF Core 10.0 | âœ… ä¿æŒ |
| **è®¤è¯** | Custom + ProtectedLocalStorage | æ—  | ğŸ”„ è¿ç§» |
| **Docker** | Docker.DotNet | Docker.DotNet | ğŸ”„ éœ€å®‰è£… |
| **ç»ˆç«¯** | xterm.js + SignalR | æ—  | ğŸ”„ è¿ç§» |
| **æ–‡ä»¶é¢„è§ˆ** | PDF.js, Mammoth.js, SheetJS | æ—  | ğŸ”„ è¿ç§» |
| **å®šæ—¶ä»»åŠ¡** | Custom IHostedService | æ—  | ğŸ”„ è¿ç§» |
| **æœ¬åœ°åŒ–** | ASP.NET Core Localization | æ—  | ğŸ”„ è¿ç§» |

---

## 7. é£é™©è¯„ä¼°

### 7.1 æŠ€æœ¯é£é™©

| é£é™©é¡¹ | å½±å“ | å¯èƒ½æ€§ | ç¼“è§£æªæ–½ |
|--------|------|--------|----------|
| FluentUI ç»„ä»¶åŠŸèƒ½ä¸è¶³ | ä¸­ | ä½ | å¿…è¦æ—¶è‡ªå®šä¹‰ç»„ä»¶æˆ–æ··åˆä½¿ç”¨ |
| æ€§èƒ½é—®é¢˜ï¼ˆå¤§é‡æ–‡ä»¶ï¼‰ | é«˜ | ä¸­ | è™šæ‹ŸåŒ–ã€åˆ†é¡µã€ç¼“å­˜ |
| SignalR è¿æ¥ç¨³å®šæ€§ | ä¸­ | ä¸­ | é‡è¿æœºåˆ¶ã€å¿ƒè·³æ£€æµ‹ |
| è·¨å¹³å°å…¼å®¹æ€§ | ä¸­ | ä½ | ç‰¹æ€§æ£€æµ‹ã€å¹³å°æŠ½è±¡ |
| å®‰å…¨æ¼æ´ | é«˜ | ä¸­ | ä»£ç å®¡æŸ¥ã€æ¸—é€æµ‹è¯• |

### 7.2 è¿›åº¦é£é™©

| é£é™©é¡¹ | å½±å“ | å¯èƒ½æ€§ | ç¼“è§£æªæ–½ |
|--------|------|--------|----------|
| åŠŸèƒ½èŒƒå›´è”“å»¶ | é«˜ | ä¸­ | ä¸¥æ ¼æŒ‰ä¼˜å…ˆçº§ï¼ŒP0-P3 åˆ†é˜¶æ®µ |
| æŠ€æœ¯éš¾ç‚¹è¶…é¢„æœŸ | ä¸­ | ä¸­ | é¢„ç•™ç¼“å†²æ—¶é—´ï¼ŒåŠæ—¶æ±‚åŠ© |
| æµ‹è¯•ä¸å……åˆ† | é«˜ | é«˜ | æ¯é˜¶æ®µå®Œæˆåç«‹å³æµ‹è¯• |

---

## 8. æ—¶é—´è§„åˆ’

### 8.1 é‡Œç¨‹ç¢‘

| é˜¶æ®µ | æ—¶é—´ | ä¸»è¦äº¤ä»˜ç‰© | éªŒæ”¶æ ‡å‡† |
|------|------|-----------|----------|
| **Phase 1** | ç¬¬1-2å‘¨ | ç”¨æˆ·è®¤è¯ã€åº”ç”¨/Dockç®¡ç†ã€ä¸»é¡µé‡æ„ | å¯ç™»å½•ã€ç®¡ç†åº”ç”¨ã€ä¸ªæ€§åŒ–ä¸»é¡µ |
| **Phase 2** | ç¬¬3-5å‘¨ | æ–‡ä»¶ç®¡ç†å™¨UIã€Dockerå¢å¼ºã€ç£ç›˜/å…±äº«UI | å®Œæ•´æ–‡ä»¶æ“ä½œã€Dockerç®¡ç†ã€ç£ç›˜ç®¡ç† |
| **Phase 3** | ç¬¬6-8å‘¨ | Anydropã€è®¡åˆ’ä»»åŠ¡ã€ç³»ç»Ÿè®¾ç½®ã€é€šçŸ¥æœåŠ¡ | æ–‡ä»¶ä¼ è¾“ã€å®šæ—¶ä»»åŠ¡ã€ç³»ç»Ÿé…ç½® |
| **Phase 4** | ç¬¬9-10å‘¨ | æœ¬åœ°åŒ–ã€ç½‘ç»œç®¡ç†ã€ä¼˜åŒ–ã€æµ‹è¯•ã€æ–‡æ¡£ | å¤šè¯­è¨€ã€æ€§èƒ½ä¼˜åŒ–ã€å®Œæ•´æ–‡æ¡£ |

### 8.2 æ¯å‘¨è®¡åˆ’ï¼ˆç¤ºä¾‹ï¼šç¬¬1å‘¨ï¼‰

| æ—¥æœŸ | ä»»åŠ¡ | äº§å‡º |
|------|------|------|
| Day 1 | è®¾è®¡è®¤è¯æ¶æ„ã€åˆ›å»º User æ•°æ®æ¨¡å‹ | æ•°æ®åº“è¿ç§»ã€User è¡¨ |
| Day 2 | å®ç° AuthenticationService | å¯†ç å“ˆå¸Œã€ç™»å½•éªŒè¯ |
| Day 3 | å®ç° Login.razor å’Œ InitialSetup.razor | ç™»å½•ç•Œé¢ã€åˆå§‹åŒ–ç•Œé¢ |
| Day 4 | å®ç° AuthenticationEndpoints | ç™»å½•/æ³¨å†Œ API |
| Day 5 | æµ‹è¯•è®¤è¯æµç¨‹ã€ä¿®å¤ Bug | å¯ç”¨çš„è®¤è¯ç³»ç»Ÿ |
| Day 6-7 | ä»£ç å®¡æŸ¥ã€æ–‡æ¡£ã€å‡†å¤‡ä¸‹å‘¨ä»»åŠ¡ | ä»£ç æäº¤ã€æ–‡æ¡£æ›´æ–° |

### 8.3 å…³é”®è·¯å¾„

```
è®¤è¯ç³»ç»Ÿ â†’ åº”ç”¨ç®¡ç† â†’ ä¸»é¡µé‡æ„ â†’ æ–‡ä»¶ç®¡ç†å™¨ â†’ Dockerç®¡ç† 
                                                â†“
                           é€šçŸ¥æœåŠ¡ â† è®¡åˆ’ä»»åŠ¡ â† Anydrop
                                â†“
                           ä¼˜åŒ–æµ‹è¯• â†’ å‘å¸ƒ
```

---

## 9. è¿ç§»æ£€æŸ¥æ¸…å•

### 9.1 Phase 1 æ£€æŸ¥æ¸…å•
- [ ] User æ•°æ®æ¨¡å‹å’Œæ•°æ®åº“è¿ç§»
- [ ] AuthenticationService å®ç°
- [ ] Login.razor é¡µé¢
- [ ] InitialSetup.razor é¡µé¢
- [ ] UserManagement.razor é¡µé¢
- [ ] AuthenticationEndpoints API
- [ ] å¯†ç å®‰å…¨æµ‹è¯•ï¼ˆå“ˆå¸Œã€ç›å€¼ï¼‰
- [ ] Application å’Œ DockItem æ•°æ®æ¨¡å‹
- [ ] ApplicationService å’Œ DockItemService
- [ ] AppManagement.razor å’Œ DockManagement.razor
- [ ] ApplicationEndpoints å’Œ DockItemEndpoints
- [ ] Home.razor é‡æ„ï¼ˆåº”ç”¨ç½‘æ ¼ã€Dockæ ï¼‰
- [ ] æ‹–æ‹½æ’åºåŠŸèƒ½
- [ ] å›¾æ ‡é€‰æ‹©å™¨
- [ ] å•å…ƒæµ‹è¯•ï¼ˆè®¤è¯ã€åº”ç”¨æœåŠ¡ï¼‰
- [ ] æ–‡æ¡£æ›´æ–°

### 9.2 Phase 2 æ£€æŸ¥æ¸…å•
- [ ] FileIndex å’Œ Thumbnail æ•°æ®æ¨¡å‹
- [ ] FileUploadService å’Œ ThumbnailService
- [ ] FileIndexService
- [ ] FileManager.razor å®Œæ•´UI
- [ ] æ–‡ä»¶é¢„è§ˆç»„ä»¶ï¼ˆå›¾ç‰‡ã€æ–‡æœ¬ã€PDFã€Wordã€Excelï¼‰
- [ ] æ–‡ä»¶ä¸Šä¼ ç»„ä»¶ï¼ˆæ‹–æ‹½ã€å¤šæ–‡ä»¶ã€è¿›åº¦ï¼‰
- [ ] ç¼©ç•¥å›¾ç”Ÿæˆå’Œç¼“å­˜
- [ ] DockerService å¢å¼º
- [ ] Docker.razor å®Œæ•´UI
- [ ] å®¹å™¨æ—¥å¿—æŸ¥çœ‹
- [ ] DiskManagement.razor å®Œæ•´UI
- [ ] ShareManagement.razor å®Œæ•´UI
- [ ] æŒ‚è½½å‘å¯¼
- [ ] å•å…ƒæµ‹è¯•ï¼ˆæ–‡ä»¶ã€Dockerã€ç£ç›˜æœåŠ¡ï¼‰
- [ ] æ–‡æ¡£æ›´æ–°

### 9.3 Phase 3 æ£€æŸ¥æ¸…å•
- [ ] AnydropMessage å’Œ AnydropAttachment æ•°æ®æ¨¡å‹
- [ ] AnydropService
- [ ] Anydrop.razor é¡µé¢
- [ ] AnydropEndpoints API
- [ ] ScheduledTask å’Œ ExecutionHistory æ•°æ®æ¨¡å‹
- [ ] ScheduledTaskService å’Œ ExecutorService
- [ ] ScheduledTasks.razor é¡µé¢
- [ ] Cron è¡¨è¾¾å¼è§£æ
- [ ] SystemSetting æ•°æ®æ¨¡å‹
- [ ] SystemSettingService
- [ ] Settings.razor é¡µé¢
- [ ] Notification æ•°æ®æ¨¡å‹
- [ ] NotificationService
- [ ] é€šçŸ¥é¢æ¿ç»„ä»¶
- [ ] NotificationEndpoints API
- [ ] å•å…ƒæµ‹è¯•ï¼ˆAnydropã€ä»»åŠ¡ã€è®¾ç½®ã€é€šçŸ¥æœåŠ¡ï¼‰
- [ ] æ–‡æ¡£æ›´æ–°

### 9.4 Phase 4 æ£€æŸ¥æ¸…å•
- [ ] LocalizationService
- [ ] èµ„æºæ–‡ä»¶ï¼ˆä¸­æ–‡ã€è‹±æ–‡ï¼‰
- [ ] æ‰€æœ‰é¡µé¢æœ¬åœ°åŒ–
- [ ] è¯­è¨€åˆ‡æ¢åŠŸèƒ½
- [ ] NetworkManagementService
- [ ] ç½‘ç»œè®¾ç½®é¡µé¢
- [ ] æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
- [ ] è™šæ‹ŸåŒ–é•¿åˆ—è¡¨
- [ ] å›¾ç‰‡æ‡’åŠ è½½
- [ ] é™æ€èµ„æºå‹ç¼©
- [ ] å†…å­˜ä¼˜åŒ–
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ >70%
- [ ] ç»„ä»¶æµ‹è¯•ï¼ˆbUnitï¼‰
- [ ] é›†æˆæµ‹è¯•
- [ ] API æ–‡æ¡£
- [ ] ç”¨æˆ·æŒ‡å—
- [ ] å¼€å‘è€…æ–‡æ¡£
- [ ] éƒ¨ç½²æ–‡æ¡£
- [ ] æ€§èƒ½æµ‹è¯•æŠ¥å‘Š

---

## 10. æˆåŠŸæ ‡å‡†

### 10.1 åŠŸèƒ½å®Œæ•´æ€§
- âœ… QingFeng æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½å·²è¿ç§»
- âœ… æ‰€æœ‰åŠŸèƒ½ç»è¿‡æµ‹è¯•éªŒè¯
- âœ… æ— é‡å¤§ Bug

### 10.2 ä»£ç è´¨é‡
- âœ… éµå¾ª CODE_STYLE.md è§„èŒƒ
- âœ… éµå¾ª FluentUI-Blazor-Guide.md æœ€ä½³å®è·µ
- âœ… å•å…ƒæµ‹è¯•è¦†ç›–ç‡ >70%
- âœ… ä»£ç å®¡æŸ¥é€šè¿‡

### 10.3 æ€§èƒ½æŒ‡æ ‡
- âœ… é¦–é¡µåŠ è½½æ—¶é—´ <2ç§’
- âœ… æ–‡ä»¶åˆ—è¡¨ï¼ˆ1000+æ–‡ä»¶ï¼‰æ¸²æŸ“æ—¶é—´ <1ç§’
- âœ… å†…å­˜å ç”¨ <500MBï¼ˆæ­£å¸¸ä½¿ç”¨ï¼‰
- âœ… æ•°æ®åº“æŸ¥è¯¢å“åº”æ—¶é—´ <100ms

### 10.4 ç”¨æˆ·ä½“éªŒ
- âœ… å“åº”å¼è®¾è®¡ï¼ˆæ¡Œé¢ã€å¹³æ¿ã€æ‰‹æœºï¼‰
- âœ… æ“ä½œæµç•…ï¼Œæ— æ˜æ˜¾å¡é¡¿
- âœ… é”™è¯¯æç¤ºå‹å¥½
- âœ… æ”¯æŒä¸­è‹±æ–‡ç•Œé¢

### 10.5 æ–‡æ¡£å®Œæ•´æ€§
- âœ… è¿ç§»è®¡åˆ’æ–‡æ¡£ âœ…ï¼ˆæœ¬æ–‡æ¡£ï¼‰
- âœ… API æ–‡æ¡£
- âœ… ç”¨æˆ·æŒ‡å—
- âœ… å¼€å‘è€…æ–‡æ¡£
- âœ… README æ›´æ–°

---

## 11. é™„å½•

### 11.1 å‚è€ƒæ–‡æ¡£
- [CODE_STYLE.md](./CODE_STYLE.md) - MingYue ä»£ç è§„èŒƒ
- [FluentUI-Blazor-Guide.md](./FluentUI-Blazor-Guide.md) - FluentUI æœ€ä½³å®è·µ
- [QingFeng README](https://github.com/KOPElan/qingfeng/blob/main/README.md)
- [QingFeng MIGRATION_STATUS](https://github.com/KOPElan/qingfeng/blob/main/MIGRATION_STATUS.md)

### 11.2 ç›¸å…³é“¾æ¥
- [Fluent UI Blazor å®˜æ–¹æ–‡æ¡£](https://www.fluentui-blazor.net/)
- [ASP.NET Core Blazor æ–‡æ¡£](https://learn.microsoft.com/en-us/aspnet/core/blazor/)
- [Entity Framework Core æ–‡æ¡£](https://learn.microsoft.com/en-us/ef/core/)
- [SignalR æ–‡æ¡£](https://learn.microsoft.com/en-us/aspnet/core/signalr/)

### 11.3 å·¥å…·å’Œåº“
- **UI**: Microsoft.FluentUI.AspNetCore.Components 4.13.2+
- **æ•°æ®åº“**: Microsoft.EntityFrameworkCore.Sqlite 10.0.1+
- **Docker**: Docker.DotNet
- **å¯†ç å“ˆå¸Œ**: BCrypt.Net-Next
- **å®šæ—¶ä»»åŠ¡**: NCrontabï¼ˆCronè¡¨è¾¾å¼è§£æï¼‰
- **æ–‡ä»¶é¢„è§ˆ**: PDF.js, Mammoth.js, SheetJS

---

## å˜æ›´è®°å½•

| ç‰ˆæœ¬ | æ—¥æœŸ | ä½œè€… | å˜æ›´è¯´æ˜ |
|------|------|------|----------|
| 1.0 | 2026-01-21 | MingYue Team | åˆå§‹ç‰ˆæœ¬ |

---

**æ–‡æ¡£æ‰€æœ‰è€…**: MingYue Development Team  
**å®¡æ ¸äºº**: To be assigned  
**æœ€åæ›´æ–°**: 2026-01-21
